<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Scholarship Registration Form</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
<div class="container">
    <h1>Student Scholarship Registration Form</h1>
    <form id="scholarshipForm">
        <div class="controls">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="surname">Surname:</label>
                    <input type="text" id="surname" name="surname" placeholder="Enter Surname" required="required" class="form-control">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="first-name">First Name:</label>
                    <input type="text" id="first-name" name="first-name" placeholder="Enter First Name" required="required" class="form-control">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="phone">Phone Number:</label>
                    <input type="tel" id="phone" name="phone" placeholder="Enter Phone Number" required="required" class="form-control">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="email">Email Address:</label>
                    <input type="email" id="email" name="email" placeholder="Enter Email Address" required="required" class="form-control">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="address">Address:</label>
                    <input type="text" id="address" name="address" placeholder="Where do you live?" required="required" class="form-control">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="school">Name of School:</label>
                    <input type="text" id="school" name="school" placeholder="Which school do you attend?" required="required" class="form-control">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="gender">Gender:</label>
                    <select id="gender" name="gender" required="required" class="form-control">
                        <option value="">Select Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>

                <div class="col-md-6 mb-3">
                    <label for="dob">Date of Birth:</label>
                    <input type="date" id="dob" name="dob" required="required" class="form-control">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="lga">Local Government Area (LGA):</label>
                    <select name="lga" id="lga" class="form-control" required>
                        <option value="">Select your Local Government Area</option>
                        <option value="Enugu North">Enugu North</option>
                        <option value="Enugu South">Enugu South</option>
                    </select>
                </div>

                <div class="col-md-6 mb-3">
                    <label for="ward">Political Ward:</label>
                    <select name="ward" id="ward" class="form-control" required>
                        <option value="">Select your Ward</option>
                    </select>
                </div>


                <div class="col-12 mb-3 text-center">
                    <button class="btn btn-primary py-2 px-3 me-3" id="submitBtn">
                        Submit and Generate Form
                        <div class="d-inline-flex btn-sm-square bg-white text-primary rounded-circle ms-2">
                            <i class="fa fa-arrow-right"></i>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </form>

    <div id="generatedForm" style="display:none;">
        <h2>Scholarship Application Form</h2>
        <p><strong>Surname:</strong> <span id="printSurname"></span></p>
        <p><strong>First Name:</strong> <span id="printFirstName"></span></p>
        <p><strong>Phone Number:</strong> <span id="printPhone"></span></p>
        <p><strong>Email:</strong> <span id="printEmail"></span></p>
        <p><strong>Address:</strong> <span id="printAddress"></span></p>
        <p><strong>School:</strong> <span id="printSchool"></span></p>
        <p><strong>Gender:</strong> <span id="printGender"></span></p>
        <p><strong>Local Government Area:</strong> <span id="printLga"></span></p>
        <p><strong>Political Ward:</strong> <span id="printWard"></span></p>

        <div class="attestation">
            <h3>Principal's Attestation</h3>
            <p>I hereby attest that the above-named student is currently enrolled in our school and the information provided is accurate to the best of my knowledge.</p>
            <p>
                <strong>Principal's Name:</strong> <span class="signature-line"></span><br>
                <strong>Signature:</strong> <span class="signature-line"></span><br>
                <strong>Date:</strong> <span class="signature-line"></span><br>
            </p>
        </div>

        <div class="no-print" style="margin-top: 20px;">
            <button type="button" id="printBtn">Print Form</button>
            <button type="button" id="downloadBtn">Download Form</button>
        </div>
    </div>
</div>

<script>
// Create a mapping of LGAs to wards
const lgaWardMapping = {
    "Enugu North": [
        "Ward 1 ASATA TOWNSHIP",
        "Ward 2 UMUNEVO",
        "Ward 3 IHEWUZI",
        "Ward 4 ONU-ASATA",
        "Ward 5 OGBETTE EAST",
        "Ward 6 OGBETTE WEST",
        "Ward 7 G.R.A",
        "Ward 8 OGUI NEW LAYOUT",
        "Ward 9 CHINA TOWN",
        "Ward 10 NEW HAVEN",
        "Ward 11 INDEPENDENCE LAYOUT",
        "Ward 12 UDI SIDING/IVA VALLEY",
        "Ward 13 OGUI TOWNSHIP"
    ],
    "Enugu South": [
        "Ward 1 AMECHI I",
        "Ward 2 AMECHI II",
        "Ward 3 OBEAGU",
        "Ward 4 UWANI EAST",
        "Ward 5 UWANI WEST",
        "Ward 6 ACHARA LAYOUT EAST",
        "Ward 7 ACHARA LAYOUT WEST",
        "Ward 8 AWKUNANAW EAST",
        "Ward 9 AWKUNANAW WEST",
        "Ward 10 UGWUAJI",
        "Ward 11 OBEAGU II",
        "Ward 12 AKWUKE",
        "Ward 13 MARYLAND"
    ]
};

const lgaSelect = document.getElementById("lga");
const wardSelect = document.getElementById("ward");

lgaSelect.addEventListener("change", function () {
    const selectedLGA = lgaSelect.value;
    wardSelect.innerHTML = "<option value=''>Select your Ward</option>";

    if (selectedLGA in lgaWardMapping) {
        const wards = lgaWardMapping[selectedLGA];
        wards.forEach((ward) => {
            const option = document.createElement("option");
            option.value = ward;
            option.textContent = ward;
            wardSelect.appendChild(option);
        });
    }
});

// Handle form submission
function handleFormSubmit(event) {
    event.preventDefault();
    const form = document.getElementById('scholarshipForm');
    const formData = new FormData(form);

    fetch('https://script.google.com/macros/s/AKfycbyqO0I7h9Ge3fQP6qQo22k1dR2aM2mTfBh2CJgObduQTXv2XPT7BjS0fZyNDfiplvfo/exec', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        alert('Form submitted successfully!');
        populateGeneratedForm();
        document.getElementById('generatedForm').style.display = 'block';
        document.getElementById('scholarshipForm').style.display = 'none';
    })
    .catch(error => {
        console.error('Error:', error);
        alert('An error occurred. Please try again.');
    });
}

// Populate generated form
function populateGeneratedForm() {
    document.getElementById('printSurname').textContent = document.getElementById('surname').value;
    document.getElementById('printFirstName').textContent = document.getElementById('first-name').value;
    document.getElementById('printPhone').textContent = document.getElementById('phone').value;
    document.getElementById('printEmail').textContent = document.getElementById('email').value;
    document.getElementById('printAddress').textContent = document.getElementById('address').value;
    document.getElementById('printSchool').textContent = document.getElementById('school').value;
    document.getElementById('printGender').textContent = document.getElementById('gender').value;
    document.getElementById('printLga').textContent = document.getElementById('lga').value;
    document.getElementById('printWard').textContent = document.getElementById('ward').value;
}

// Download form as PDF
document.getElementById('downloadBtn').addEventListener('click', function () {
    const element = document.getElementById('generatedForm');
    html2pdf().from(element).save('Scholarship_Form.pdf');
});

// Print form
document.getElementById('printBtn').addEventListener('click', function () {
    window.print();
});

// Event listener for form submission
document.getElementById('scholarshipForm').addEventListener('submit', handleFormSubmit);

</script>
</body>
</html>
